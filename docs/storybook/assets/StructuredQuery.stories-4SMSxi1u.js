var Bn=Object.defineProperty;var qn=(r,e,n)=>e in r?Bn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n;var S=(r,e,n)=>(qn(r,typeof e!="symbol"?e+"":e,n),n),Mn=(r,e,n)=>{if(!e.has(r))throw TypeError("Cannot "+n)};var lt=(r,e,n)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,n)};var We=(r,e,n)=>(Mn(r,e,"access private method"),n);import{j as E}from"./jsx-runtime-FsUICBgo.js";import{d as on}from"./index-777x7qAF.js";import{S as Vn,D as Gn,c as Wn}from"./storybookUtils-P7YVKdto.js";import{S as Qn,w as Fn,F as Hn,o as Zn,b as Un,D as Kn,a as Xn}from"./chunk-WFFRPTHA-XxQL4zvM.js";import{R as f,a as Jn,g as sn,r as w}from"./index-RfLt4OUa.js";import{_ as wt,I as kt,a as yt,b as Be,f as de,u as qe,c as J,d as b,e as j,l as zt,B as Ye,C as Yn,g as an,m as ct,w as ln,o as cn,S as er,v as tr,E as nr,h as rr,s as or}from"./Button-I6r7vMZn.js";import{P as c}from"./index-4QtD-hFu.js";import{R as ir}from"./ResizeObserver.es-lk2mK0C6.js";import{d as sr}from"./_baseSlice-BktYtjHb.js";import{u as ar,T as Pt}from"./uniqueId-ym8a2oXz.js";import{D as un,m as dn,L as lr,a as cr,u as ur}from"./createPropAdapter-Fa9bvp5B.js";import{L as we,a as pn,b as hn}from"./index-RqkF5WTj.js";import{m as fn}from"./mergeRefs-Zi_35mDS.js";import{W as mn,a as gn}from"./bucket-34-ZK23PrgJ.js";import{f as dr}from"./formatMessage-wl7oTduw.js";import{o as At,T as pr}from"./omit-LCtJKVnw.js";import"./callBound-4MCeDK1M.js";import"./pickBy-llkn_6s3.js";import"./isPlainObject-g73re4jY.js";import"./index-xck8ovCi.js";import"./preview-errors-Ix78kkVy.js";import"./debounce-eWC8LGMf.js";import"./v4-yQnnJER4.js";import"./inheritsLoose-O2jMHMzR.js";import"./_baseClone-6sJ_SjB4.js";import"./last-zLtIjBiu.js";var Lt,hr=["children"],bn=f.forwardRef(function(e,n){var t=e.children,o=wt(e,hr);return f.createElement(kt,yt({width:16,height:16,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",ref:n},o),Lt||(Lt=f.createElement("path",{d:"M17 15L17 8 15 8 15 15 8 15 8 17 15 17 15 24 17 24 17 17 24 17 24 15z"})),t)}),jt,Bt,fr=["children"],mr=f.forwardRef(function(e,n){var t=e.children,o=wt(e,fr);return f.createElement(kt,yt({width:16,height:16,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",ref:n},o),jt||(jt=f.createElement("path",{d:"M28,10V28H10V10H28m0-2H10a2,2,0,0,0-2,2V28a2,2,0,0,0,2,2H28a2,2,0,0,0,2-2V10a2,2,0,0,0-2-2Z"})),Bt||(Bt=f.createElement("path",{d:"M4,18H2V4A2,2,0,0,1,4,2H18V4H4Z"})),t)}),qt,Mt,gr=["children"],br=f.forwardRef(function(e,n){var t=e.children,o=wt(e,gr);return f.createElement(kt,yt({width:16,height:16,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",ref:n},o),qt||(qt=f.createElement("path",{d:"M16,4c6.6,0,12,5.4,12,12s-5.4,12-12,12S4,22.6,4,16S9.4,4,16,4 M16,2C8.3,2,2,8.3,2,16s6.3,14,14,14s14-6.3,14-14	S23.7,2,16,2z"})),Mt||(Mt=f.createElement("path",{d:"M8 15H24V17H8z"})),t)});const xr=Jn(ir);function wr(r){return r&&typeof r=="object"&&"default"in r?r.default:r}var kr=wr(xr),ue=w;function yr(r){r===void 0&&(r={});var e=ue.useRef(null),n=r.onResize,t=ue.useRef(void 0);t.current=n;var o=ue.useRef(),s=r.ref||e,i=ue.useState({width:void 0,height:void 0}),a=i[0],l=i[1],d=ue.useRef({width:void 0,height:void 0});return ue.useEffect(function(){o.current||(o.current=new kr(function(u){if(Array.isArray(u)&&u.length){var h=u[0],p=Math.round(h.contentRect.width),m=Math.round(h.contentRect.height);if(d.current.width!==p||d.current.height!==m){var C={width:p,height:m};t.current?t.current(C):(d.current.width=p,d.current.height=m,l(C))}}}))},[]),ue.useEffect(function(){if(!(typeof s!="object"||s===null||!(s.current instanceof Element))){var u=s.current;return o.current.observe(u),function(){return o.current.unobserve(u)}}},[s]),ue.useMemo(function(){return{ref:s,width:a.width,height:a.height}},[s,a?a.width:null,a?a.height:null])}var vr=yr;const Tr=sn(vr);var Rr=["children","className","feedback","feedbackTimeout","onAnimationEnd","onClick"];function et(r){var e,n=r.children,t=r.className,o=r.feedback,s=r.feedbackTimeout,i=r.onAnimationEnd,a=r.onClick,l=Be(r,Rr),d=w.useState(""),u=de(d,2),h=u[0],p=u[1],m=qe(),C=J(t,"".concat(m,"--copy"),(e={},b(e,"".concat(m,"--copy-btn--animating"),h),b(e,"".concat(m,"--copy-btn--").concat(h),h),e)),g=w.useCallback(sr(function(){p("fade-out")},s),[s]),T=w.useCallback(function(){p("fade-in"),g()},[g]),O=function(P){P.animationName==="hide-feedback"&&p("")};return w.useEffect(function(){return function(){g.cancel()}},[g]),f.createElement("button",j({type:"button",className:C,onClick:zt([a,T]),onAnimationEnd:zt([i,O])},l,{"aria-live":"polite","aria-label":!n&&(h?o:l["aria-label"])||null}),n,h?o:l["aria-label"],f.createElement("span",{"aria-hidden":"true",className:"".concat(m,"--assistive-text ").concat(m,"--copy-btn__feedback")},o))}et.propTypes={children:c.node,className:c.string,feedback:c.string,feedbackTimeout:c.number,onAnimationEnd:c.func,onClick:c.func};et.defaultProps={feedback:"Copied!",feedbackTimeout:2e3,onClick:function(){}};var Sr=["iconDescription","className"];function vt(r){var e=r.iconDescription,n=r.className,t=Be(r,Sr),o=qe();return f.createElement(et,j({className:J(n,"".concat(o,"--copy-btn")),"aria-label":e,title:e},t),f.createElement(mr,{className:"".concat(o,"--snippet__icon")}))}vt.propTypes={className:c.string,feedback:c.string,feedbackTimeout:c.number,iconDescription:c.string,onClick:c.func};vt.defaultProps={iconDescription:"Copy to clipboard",feedback:"Copied!",feedbackTimeout:2e3,onClick:function(){}};var Cr=function(){var r=document.getSelection();if(!r.rangeCount)return function(){};for(var e=document.activeElement,n=[],t=0;t<r.rangeCount;t++)n.push(r.getRangeAt(t));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null;break}return r.removeAllRanges(),function(){r.type==="Caret"&&r.removeAllRanges(),r.rangeCount||n.forEach(function(o){r.addRange(o)}),e&&e.focus()}},Ir=Cr,Vt={"text/plain":"Text","text/html":"Url",default:"Text"},_r="Copy to clipboard: #{key}, Enter";function Er(r){var e=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return r.replace(/#{\s*key\s*}/g,e)}function $r(r,e){var n,t,o,s,i,a,l=!1;e||(e={}),n=e.debug||!1;try{o=Ir(),s=document.createRange(),i=document.getSelection(),a=document.createElement("span"),a.textContent=r,a.ariaHidden="true",a.style.all="unset",a.style.position="fixed",a.style.top=0,a.style.clip="rect(0, 0, 0, 0)",a.style.whiteSpace="pre",a.style.webkitUserSelect="text",a.style.MozUserSelect="text",a.style.msUserSelect="text",a.style.userSelect="text",a.addEventListener("copy",function(u){if(u.stopPropagation(),e.format)if(u.preventDefault(),typeof u.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var h=Vt[e.format]||Vt.default;window.clipboardData.setData(h,r)}else u.clipboardData.clearData(),u.clipboardData.setData(e.format,r);e.onCopy&&(u.preventDefault(),e.onCopy(u.clipboardData))}),document.body.appendChild(a),s.selectNodeContents(a),i.addRange(s);var d=document.execCommand("copy");if(!d)throw new Error("copy command was unsuccessful");l=!0}catch(u){n&&console.error("unable to copy using execCommand: ",u),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",r),e.onCopy&&e.onCopy(window.clipboardData),l=!0}catch(h){n&&console.error("unable to copy using clipboardData: ",h),n&&console.error("falling back to prompt"),t=Er("message"in e?e.message:_r),window.prompt(t,r)}}finally{i&&(typeof i.removeRange=="function"?i.removeRange(s):i.removeAllRanges()),a&&document.body.removeChild(a),o()}return l}var Or=$r;const Dr=sn(Or);var Nr=["className","type","children","disabled","feedback","feedbackTimeout","onClick","ariaLabel","copyText","copyLabel","copyButtonDescription","light","showMoreText","showLessText","hideCopyButton","wrapText","maxCollapsedNumberOfRows","maxExpandedNumberOfRows","minCollapsedNumberOfRows","minExpandedNumberOfRows"],xe=16,zr=15,Pr=0,Ar=3,Lr=16;function Tt(r){var e,n=r.className,t=r.type,o=r.children,s=r.disabled,i=r.feedback,a=r.feedbackTimeout,l=r.onClick,d=r.ariaLabel,u=r.copyText,h=r.copyLabel,p=r.copyButtonDescription,m=r.light,C=r.showMoreText,g=r.showLessText,T=r.hideCopyButton,O=r.wrapText,K=r.maxCollapsedNumberOfRows,P=K===void 0?zr:K,ie=r.maxExpandedNumberOfRows,D=ie===void 0?Pr:ie,ve=r.minCollapsedNumberOfRows,pe=ve===void 0?Ar:ve,M=r.minExpandedNumberOfRows,ee=M===void 0?Lr:M,X=Be(r,Nr),Ee=w.useState(!1),Te=de(Ee,2),I=Te[0],B=Te[1],$e=w.useState(!1),x=de($e,2),he=x[0],te=x[1],Re=w.useRef(ar()),ae=Re.current,$=w.useRef(),q=w.useRef(),G=w.useRef(),Oe=w.useState(!1),le=de(Oe,2),De=le[0],Ne=le[1],V=w.useState(!1),W=de(V,2),Se=W[0],Ce=W[1],fe=w.useCallback(function(){if(t==="single")return q;if(t==="multi")return $},[t]),N=qe(),Ie=w.useCallback(function(){var R=fe().current,z=R.clientWidth,A=R.scrollLeft,y=R.scrollWidth;return{horizontalOverflow:y>z,codeClientWidth:z,codeScrollWidth:y,codeScrollLeft:A}},[fe]),ne=w.useCallback(function(){if(!(t==="inline"||t==="single"&&!(q!=null&&q.current)||t==="multi"&&!($!=null&&$.current))){var R=Ie(),z=R.horizontalOverflow,A=R.codeClientWidth,y=R.codeScrollWidth,_=R.codeScrollLeft;Ne(z&&!!_),Ce(z&&_+A!==y)}},[t,Ie]);Tr({ref:fe(),onResize:function(){if($!=null&&$.current&&t==="multi"){var z=$.current.getBoundingClientRect(),A=z.height;P>0&&(D<=0||D>P)&&A>P*xe?te(!0):te(!1),I&&ee>0&&A<=ee*xe&&B(!1)}($!=null&&$.current&&t==="multi"||q!=null&&q.current&&t==="single")&&ne()}},[t,P,D,ee,xe]),w.useEffect(function(){ne()},[ne]);var me=function(z){if(u||G!=null&&G.current){var A;Dr(u??(G==null||(A=G.current)===null||A===void 0?void 0:A.innerText))}l&&l(z)},ce=J(n,"".concat(N,"--snippet"),(e={},b(e,"".concat(N,"--snippet--").concat(t),t),b(e,"".concat(N,"--snippet--disabled"),t!=="inline"&&s),b(e,"".concat(N,"--snippet--expand"),I),b(e,"".concat(N,"--snippet--light"),m),b(e,"".concat(N,"--snippet--no-copy"),T),b(e,"".concat(N,"--snippet--wraptext"),O),e)),ge=I?g:C;if(t==="inline")return T?f.createElement("span",{className:ce},f.createElement("code",{id:ae,ref:G},o)):f.createElement(et,j({},X,{onClick:me,"aria-label":h||d,"aria-describedby":ae,className:ce,feedback:i,feedbackTimeout:a}),f.createElement("code",{id:ae,ref:G},o));var be={};if(t==="multi"){var Q={};I?(D>0&&(Q.maxHeight=D*xe),ee>0&&(Q.minHeight=ee*xe)):(P>0&&(Q.maxHeight=P*xe),pe>0&&(Q.minHeight=pe*xe)),Object.keys(Q).length&&(be.style=Q)}return f.createElement("div",j({},X,{className:ce}),f.createElement("div",j({ref:q,role:t==="single"||t==="multi"?"textbox":null,tabIndex:(t==="single"||t==="multi")&&!s?0:null,className:"".concat(N,"--snippet-container"),"aria-label":d||h||"code-snippet","aria-readonly":t==="single"||t==="multi"?!0:null,"aria-multiline":t==="multi"?!0:null,onScroll:t==="single"&&ne||null},be),f.createElement("pre",{ref:$,onScroll:t==="multi"&&ne||null},f.createElement("code",{ref:G},o))),De&&f.createElement("div",{className:"".concat(N,"--snippet__overflow-indicator--left")}),Se&&f.createElement("div",{className:"".concat(N,"--snippet__overflow-indicator--right")}),!T&&f.createElement(vt,{disabled:s,onClick:me,feedback:i,feedbackTimeout:a,iconDescription:p}),he&&f.createElement(Ye,{kind:"ghost",size:"field",className:"".concat(N,"--snippet-btn--expand"),disabled:s,onClick:function(){return B(!I)}},f.createElement("span",{className:"".concat(N,"--snippet-btn--text")},ge),f.createElement(Yn,{"aria-label":ge,className:"".concat(N,"--icon-chevron--down ").concat(N,"--snippet__icon"),name:"chevron--down",role:"img"})))}Tt.propTypes={ariaLabel:c.string,children:c.node,className:c.string,copyButtonDescription:c.string,copyLabel:c.string,copyText:c.string,disabled:c.bool,feedback:c.string,feedbackTimeout:c.number,hideCopyButton:c.bool,light:c.bool,maxCollapsedNumberOfRows:c.number,maxExpandedNumberOfRows:c.number,minCollapsedNumberOfRows:c.number,minExpandedNumberOfRows:c.number,onClick:c.func,showLessText:c.string,showMoreText:c.string,type:c.oneOf(["single","inline","multi"]),wrapText:c.bool};Tt.defaultProps={type:"single",showMoreText:"Show more",showLessText:"Show less",wrapText:!1};var jr=["ariaLabel","className","direction","disabled","downshiftProps","helperText","id","initialSelectedItem","invalid","invalidText","items","itemToElement","itemToString","light","onChange","onInputChange","onToggleClick","placeholder","selectedItem","shouldFilterItem","size","titleText","translateWithId","type","warn","warnText","onStateChange"];function Gt(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function Wt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gt(Object(n),!0).forEach(function(t){b(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}var Br=function(e){return typeof e=="string"?e:e&&e.label},qr=function(){return!0},Qt=function(e){var n=e.initialSelectedItem,t=e.inputValue,o=e.itemToString,s=e.selectedItem;return s?o(s):n?o(n):t||""},Mr=function(e,n){var t=e.items,o=e.itemToString;if(!n)return-1;for(var s=n.toLowerCase(),i=0;i<t.length;i++){var a=o(t[i]).toLowerCase();if(a.indexOf(s)!==-1)return i}return-1},Vr=cn(),tt=f.forwardRef(function(r,e){var n,t=r.ariaLabel,o=r.className,s=r.direction,i=r.disabled,a=r.downshiftProps,l=r.helperText,d=r.id,u=r.initialSelectedItem,h=r.invalid,p=r.invalidText,m=r.items,C=r.itemToElement,g=r.itemToString,T=r.light,O=r.onChange,K=r.onInputChange,P=r.onToggleClick,ie=r.placeholder,D=r.selectedItem,ve=r.shouldFilterItem,pe=r.size,M=r.titleText,ee=r.translateWithId;r.type;var X=r.warn,Ee=r.warnText;r.onStateChange;var Te=Be(r,jr),I=qe(),B=w.useRef(),$e=Vr(),x=w.useState(Qt({initialSelectedItem:u,inputValue:"",itemToString:g,selectedItem:D})),he=de(x,2),te=he[0],Re=he[1],ae=w.useState(null),$=de(ae,2),q=$[0],G=$[1],Oe=w.useState(null),le=de(Oe,2),De=le[0],Ne=le[1],V=w.useRef(K);(!De||q!==D)&&(Ne(!0),G(D),Re(Qt({initialSelectedItem:u,inputValue:te,itemToString:g,selectedItem:D})));var W=function(_,L,Y){return _.filter(function(F){return ve({item:F,itemToString:L,inputValue:Y})})},Se=function(_){O&&O({selectedItem:_})},Ce=function(_){Re(_||"")};w.useEffect(function(){V.current=K},[K]),w.useEffect(function(){V.current&&V.current(te)},[te]);var fe=function(){B!=null&&B.current&&B.current.focus()},N=function(_,L){var Y=L.setHighlightedIndex;if(Object.prototype.hasOwnProperty.call(_,"inputValue")){var F=_.inputValue,it=W(m,g,F);Y(Mr(Wt(Wt({},r),{},{items:it}),F))}},Ie=function(_){return function(L){P&&P(L),L.target===B.current&&_&&(L.preventDownshiftDefault=!0,L.persist())}},ne=an("enable-v11-release"),me=!h&&X,ce=J("".concat(I,"--combo-box"),[ne?null:o],(n={},b(n,"".concat(I,"--list-box--up"),s==="top"),b(n,"".concat(I,"--combo-box--warning"),me),n)),ge=J("".concat(I,"--label"),b({},"".concat(I,"--label--disabled"),i)),be=l?"combobox-helper-text-".concat($e):void 0,Q=J("".concat(I,"--form__helper-text"),b({},"".concat(I,"--form__helper-text--disabled"),i)),R=J("".concat(I,"--list-box__wrapper"),[ne?o:null]),z=J("".concat(I,"--text-input"),b({},"".concat(I,"--text-input--empty"),!te)),A=C;return f.createElement(un,j({},dn(a),{onChange:Se,onInputValueChange:Ce,onStateChange:function(){for(var _,L=arguments.length,Y=new Array(L),F=0;F<L;F++)Y[F]=arguments[F];N.apply(void 0,Y),a==null||(_=a.onStateChange)===null||_===void 0||_.call.apply(_,[a].concat(Y))},inputValue:te||"",itemToString:g,initialSelectedItem:u,inputId:d,selectedItem:D}),function(y){var _,L=y.getInputProps,Y=y.getItemProps,F=y.getLabelProps,it=y.getMenuProps,Nn=y.getRootProps,zn=y.getToggleButtonProps,_e=y.isOpen,Ge=y.inputValue,se=y.selectedItem,Dt=y.highlightedIndex,Pn=y.clearSelection,st=y.toggleMenu,An=Nn({},{suppressRefError:!0}),Ln=F(),jn=zn({disabled:i,onClick:Ie(_e),onMouseUp:function(Z){_e&&Z.stopPropagation()}}),Nt=L({"aria-labelledby":null,disabled:i,placeholder:ie,onClick:function(){st()},onKeyDown:function(Z){ct(Z,er)&&Z.stopPropagation(),ct(Z,tr)&&!Ge&&st(),ct(Z,nr)&&Ge&&Z.target===B.current&&_e&&(st(),Z.preventDownshiftDefault=!0,Z.persist())}});return f.createElement("div",{className:R},M&&f.createElement(Pt,j({as:"label",className:ge},Ln),M),f.createElement(we,{className:ce,disabled:i,invalid:h,invalidText:p,isOpen:_e,light:T,size:pe,warn:X,warnText:Ee},f.createElement("div",{className:"".concat(I,"--list-box__field")},f.createElement("input",j({role:"combobox",disabled:i,className:z,type:"text",tabIndex:"0","aria-autocomplete":"list","aria-expanded":An["aria-expanded"],"aria-haspopup":"listbox","aria-controls":Nt["aria-controls"],title:B==null||(_=B.current)===null||_===void 0?void 0:_.value},Nt,Te,{ref:fn(B,e),"aria-describedby":l&&!h&&!X?be:void 0})),h&&f.createElement(mn,{className:"".concat(I,"--list-box__invalid-icon")}),me&&f.createElement(gn,{className:"".concat(I,"--list-box__invalid-icon ").concat(I,"--list-box__invalid-icon--warning")}),Ge&&f.createElement(lr,{clearSelection:Pn,translateWithId:ee,disabled:i,onClearSelection:fe}),f.createElement(cr,j({},jn,{isOpen:_e,translateWithId:ee}))),f.createElement(we.Menu,it({"aria-label":t}),_e?W(m,g,Ge).map(function(H,Z){var ze,at=Y((ze={item:H,index:Z},b(ze,"aria-current",se===H?!0:null),b(ze,"aria-selected",Dt===Z?!0:null),b(ze,"disabled",H.disabled),ze));return f.createElement(we.MenuItem,j({key:at.id,isActive:se===H,isHighlighted:Dt===Z||(se==null?void 0:se.id)&&(se==null?void 0:se.id)===H.id||!1,title:C?H.text:g(H)},at),C?f.createElement(A,j({key:at.id},H)):g(H),se===H&&f.createElement(ln,{className:"".concat(I,"--list-box__menu-item__selected-icon")}))}):null)),l&&!h&&!X&&f.createElement(Pt,{as:"div",id:be,className:Q},l))})});tt.displayName="ComboBox";tt.propTypes={ariaLabel:c.string,className:c.string,direction:c.oneOf(["top","bottom"]),disabled:c.bool,downshiftProps:c.shape(un.propTypes),helperText:c.string,id:c.string.isRequired,initialSelectedItem:c.oneOfType([c.object,c.string,c.number]),invalid:c.bool,invalidText:c.node,itemToElement:c.func,itemToString:c.func,items:c.array.isRequired,light:c.bool,onChange:c.func.isRequired,onInputChange:c.func,onStateChange:c.func,onToggleClick:c.func,placeholder:c.string,selectedItem:c.oneOfType([c.object,c.string,c.number]),shouldFilterItem:c.func,size:pn,titleText:c.node,translateWithId:c.func,type:hn,warn:c.bool,warnText:c.node};tt.defaultProps={disabled:!1,itemToString:Br,itemToElement:null,shouldFilterItem:qr,type:"default",ariaLabel:"Choose an item",light:!1,direction:"bottom"};const Ft=tt;var Gr=["className","disabled","direction","items","label","ariaLabel","itemToString","itemToElement","renderSelectedItem","type","size","onChange","id","titleText","hideLabel","helperText","translateWithId","light","invalid","invalidText","warn","warnText","initialSelectedItem","selectedItem","downshiftProps"];function Ht(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,t)}return n}function Zt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ht(Object(n),!0).forEach(function(t){b(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}var Wr=cn(),Qr=function(e){return typeof e=="string"?e:e?e.label:""},nt=f.forwardRef(function(e,n){var t,o,s,i=e.className,a=e.disabled,l=e.direction,d=e.items,u=e.label,h=e.ariaLabel,p=e.itemToString,m=e.itemToElement,C=e.renderSelectedItem,g=e.type,T=e.size,O=e.onChange,K=e.id,P=e.titleText,ie=e.hideLabel,D=e.helperText,ve=e.translateWithId,pe=e.light,M=e.invalid,ee=e.invalidText,X=e.warn,Ee=e.warnText,Te=e.initialSelectedItem,I=e.selectedItem,B=e.downshiftProps,$e=Be(e,Gr),x=qe(),he=dn(Zt(Zt({},B),{},{items:d,itemToString:p,initialSelectedItem:Te,onSelectedItemChange:be})),te=w.useRef(Wr()),Re=te.current,ae=D?"dropdown-helper-text-".concat(Re):void 0;I!==void 0&&(he.selectedItem=I);var $=ur(he),q=$.isOpen,G=$.getToggleButtonProps,Oe=$.getLabelProps,le=$.getMenuProps,De=$.getItemProps,Ne=$.highlightedIndex,V=$.selectedItem,W=g==="inline",Se=!M&&X,Ce=an("enable-v11-release"),fe=J("".concat(x,"--dropdown"),[Ce?null:i],(t={},b(t,"".concat(x,"--dropdown--invalid"),M),b(t,"".concat(x,"--dropdown--warning"),Se),b(t,"".concat(x,"--dropdown--open"),q),b(t,"".concat(x,"--dropdown--inline"),W),b(t,"".concat(x,"--dropdown--disabled"),a),b(t,"".concat(x,"--dropdown--light"),pe),b(t,"".concat(x,"--dropdown--").concat(T),T),b(t,"".concat(x,"--list-box--up"),l==="top"),t)),N=J("".concat(x,"--label"),(o={},b(o,"".concat(x,"--label--disabled"),a),b(o,"".concat(x,"--visually-hidden"),ie),o)),Ie=J("".concat(x,"--form__helper-text"),b({},"".concat(x,"--form__helper-text--disabled"),a)),ne=J("".concat(x,"--dropdown__wrapper"),"".concat(x,"--list-box__wrapper"),[Ce?i:null],(s={},b(s,"".concat(x,"--dropdown__wrapper--inline"),W),b(s,"".concat(x,"--list-box__wrapper--inline"),W),b(s,"".concat(x,"--dropdown__wrapper--inline--invalid"),W&&M),b(s,"".concat(x,"--list-box__wrapper--inline--invalid"),W&&M),s)),me=m,ce=G(),ge=D?f.createElement("div",{id:ae,className:Ie},D):null;function be(R){var z=R.selectedItem;O&&O({selectedItem:z})}var Q=w.useRef(d.map(function(R){return f.createRef()}));return f.createElement("div",j({className:ne},$e),P&&f.createElement("label",j({className:N},Oe()),P),f.createElement(we,{"aria-label":h,size:T,className:fe,invalid:M,invalidText:ee,warn:X,warnText:Ee,light:pe,isOpen:q,id:K},M&&f.createElement(mn,{className:"".concat(x,"--list-box__invalid-icon")}),Se&&f.createElement(gn,{className:"".concat(x,"--list-box__invalid-icon ").concat(x,"--list-box__invalid-icon--warning")}),f.createElement("button",j({type:"button",role:"combobox","aria-controls":le().id,className:"".concat(x,"--list-box__field"),disabled:a,"aria-disabled":a,"aria-describedby":!W&&!M&&!X&&ge?ae:void 0,title:V?p(V):u},ce,{ref:fn(ce.ref,n)}),f.createElement("span",{className:"".concat(x,"--list-box__label")},V?C?C(V):p(V):u),f.createElement(we.MenuIcon,{isOpen:q,translateWithId:ve})),f.createElement(we.Menu,le(),q&&d.map(function(R,z){var A,y=De({item:R,index:z,disabled:R.disabled}),_=m?R.text:p(R),L=(Q==null||(A=Q.current[z])===null||A===void 0?void 0:A.current)||{},Y=L.offsetWidth,F=L.scrollWidth;return f.createElement(we.MenuItem,j({key:y.id,isActive:V===R,isHighlighted:Ne===z||V===R,title:Y<F&&_||void 0,ref:{menuItemOptionRef:Q.current[z]}},y),m?f.createElement(me,j({key:y.id},R)):p(R),V===R&&f.createElement(ln,{className:"".concat(x,"--list-box__menu-item__selected-icon")}))}))),!W&&!M&&!X&&ge)});nt.displayName="Dropdown";nt.propTypes={ariaLabel:c.string,className:c.string,direction:c.oneOf(["top","bottom"]),disabled:c.bool,downshiftProps:c.object,helperText:c.node,hideLabel:c.bool,id:c.string.isRequired,initialSelectedItem:c.oneOfType([c.object,c.string,c.number]),inline:rr(c.bool),invalid:c.bool,invalidText:c.node,itemToElement:c.func,itemToString:c.func,items:c.array.isRequired,label:c.node.isRequired,light:c.bool,onChange:c.func,renderSelectedItem:c.func,selectedItem:c.oneOfType([c.object,c.string,c.number]),size:pn,titleText:c.node,translateWithId:c.func,type:hn,warn:c.bool,warnText:c.node};nt.defaultProps={disabled:!1,type:"default",itemToString:Qr,itemToElement:null,light:!1,titleText:"",helperText:"",direction:"bottom"};const Fr=nt,rt=`${or.prefix}--structured-query`,Rt=`${rt}__rule-group`,Hr=`${Rt}--nested`,Zr=`${Rt}-dropdown`,xn=`${rt}__rules`,wn=`${xn}__buttons`,Ur=`${rt}__copyable-query`,ut=({messages:r,structuredQuerySelection:e,setStructuredQuerySelection:n,groupId:t})=>{const o=[{label:r.ruleGroupDropdownAllOptionText,value:","},{label:r.ruleGroupDropdownAnyOptionText,value:"|"}],s=a=>{n({...e,groups:{...e.groups,[`${t}`]:{...e.groups[t],operator:a.selectedItem.value}}})},i=E.jsx(Fr,{id:"structured-query-dropdown",items:o,type:"inline",initialSelectedItem:r.ruleGroupDropdownAllOptionText,label:r.ruleGroupDropdownLabelText,onChange:s},"structured-query-dropdown");return E.jsx("div",{className:Zr,children:dr(r.ruleGroupDropdownText,{dropdown:i})})};try{ut.displayName="RuleGroupDropdown",ut.__docgenInfo={description:"",displayName:"RuleGroupDropdown",props:{messages:{defaultValue:null,description:"override default messages for the component by specifying custom and/or internationalized text strings",name:"messages",required:!0,type:{name:"Messages"}},structuredQuerySelection:{defaultValue:null,description:"state that represents the current rules and selections for the structured query",name:"structuredQuerySelection",required:!0,type:{name:"StructuredQuerySelection"}},setStructuredQuerySelection:{defaultValue:null,description:"used to set the structuredQuerySelection state",name:"setStructuredQuerySelection",required:!0,type:{name:"Dispatch<SetStateAction<StructuredQuerySelection>>"}},groupId:{defaultValue:null,description:"id of the group for the rule group dropdown",name:"groupId",required:!0,type:{name:"number"}}}}}catch{}const dt=({removeRuleRowButtonIconDescription:r,groupId:e,rowId:n,structuredQuerySelection:t,setStructuredQuerySelection:o})=>{const s=()=>{const i=t.groups[e].rows.filter(d=>d!==n),a=At(t.rows,n),l=i.length===0;o(l?{...t,groups:{...At(t.groups,e)},rows:{...a},group_order:t.group_order.filter(d=>d!==e)}:{...t,groups:{...t.groups,[`${e}`]:{...t.groups[e],rows:i}},rows:{...a}})};return E.jsx(Ye,{hasIconOnly:!0,kind:"ghost",renderIcon:br,iconDescription:r,onClick:s,"data-testid":`remove-rule-row-button-${e}`})};try{dt.displayName="RemoveRuleRowButton",dt.__docgenInfo={description:"",displayName:"RemoveRuleRowButton",props:{removeRuleRowButtonIconDescription:{defaultValue:null,description:"text to display for the Remove rule button icon description",name:"removeRuleRowButtonIconDescription",required:!0,type:{name:"string"}},groupId:{defaultValue:null,description:"id of the group for the rule row to render",name:"groupId",required:!0,type:{name:"number"}},rowId:{defaultValue:null,description:"id of the rule row to remove",name:"rowId",required:!0,type:{name:"number"}},structuredQuerySelection:{defaultValue:null,description:"state that represents the current rules and selections for the structured query",name:"structuredQuerySelection",required:!0,type:{name:"StructuredQuerySelection"}},setStructuredQuerySelection:{defaultValue:null,description:"used to set the structuredQuerySelection state",name:"setStructuredQuerySelection",required:!0,type:{name:"Dispatch<SetStateAction<StructuredQuerySelection>>"}}}}}catch{}const Kr=r=>r&&r.fields?r.fields.reduce((t,o)=>(o.type==="nested"||o.field&&!t.includes(o.field)&&t.push(o.field),t),[]):[],pt=r=>{const e=Object.keys(r).reduce((n,t)=>Math.max(parseInt(n),parseInt(t)).toString());return parseInt(e)+1},Xr=r=>{let e="";return e+=r.group_order.map(n=>n===0?Ut(r,n):"("+Ut(r,n)+")").join(r.groups[0].operator),e},Ut=(r,e)=>r.groups[e].rows.map(n=>{const t=r.rows[n],o=Yr(t.field),s=t.value===""?t.value:'"'+Jr(t.value)+'"';return`${o}${t.operator}${s}`}).join(r.groups[e].operator),Jr=r=>r.replace(/(["])/g,'\\"'),Yr=r=>{const e=t=>t.replace(t,`\\${t}`),n=/([,|:!"\\()[\]^~<>*])/g;return r.replace(n,e)},ht=({messages:r,groupId:e,rowId:n,structuredQuerySelection:t,setStructuredQuerySelection:o})=>{const{fieldsStore:{data:s,isLoading:i,isError:a}}=w.useContext(Qn),l=Kr(s),d=[{label:r.operatorDropdownIsOptionText,value:"::"},{label:r.operatorDropdownIsNotOptionText,value:"::!"},{label:r.operatorDropdownContainsOptionText,value:":"},{label:r.operatorDropdownDoesNotContainOptionText,value:":!"}],u=e===0,h=t.groups[e].rows.length>1||!u,p=T=>{const O=T.selectedItem===null?"":T.selectedItem;o({...t,rows:{...t.rows,[`${n}`]:{...t.rows[n],field:O}}})},m=T=>{const O=T.selectedItem===null?"":T.selectedItem.value;o({...t,rows:{...t.rows,[`${n}`]:{...t.rows[n],operator:O}}})},C=T=>{const O=T.currentTarget.value;o({...t,rows:{...t.rows,[`${n}`]:{...t.rows[n],value:O}}})};let g;return i?g=r.fieldDropdownLoadingText:a?g=r.fieldDropdownErrorText:g=r.fieldDropdownPlaceholderText,E.jsxs("div",{className:xn,"data-testid":`rule-row-${e}`,children:[E.jsx(Ft,{id:`structured-query-rules-field-${e}`,items:l,placeholder:g,titleText:r.fieldDropdownTitleText,disabled:i||a,onChange:p}),E.jsx(Ft,{id:`structured-query-rules-operator-${e}`,items:d,placeholder:r.operatorDropdownPlaceholderText,titleText:r.operatorDropdownTitleText,onChange:m}),E.jsx(pr,{id:`structured-query-rules-value-${e}`,labelText:r.valueInputLabelText,placeholder:r.valueInputPlaceholderText,onChange:C}),h&&E.jsx(dt,{removeRuleRowButtonIconDescription:r.removeRuleRowButtonIconDescription,groupId:e,rowId:n,structuredQuerySelection:t,setStructuredQuerySelection:o})]})};try{ht.displayName="RuleRow",ht.__docgenInfo={description:"",displayName:"RuleRow",props:{messages:{defaultValue:null,description:"override default messages for the component by specifying custom and/or internationalized text strings",name:"messages",required:!0,type:{name:"Messages"}},groupId:{defaultValue:null,description:"id of the group for the rule row to render",name:"groupId",required:!0,type:{name:"number"}},rowId:{defaultValue:null,description:"id of the rule row to render",name:"rowId",required:!0,type:{name:"number"}},structuredQuerySelection:{defaultValue:null,description:"state that represents the current rules and selections for the structured query",name:"structuredQuerySelection",required:!0,type:{name:"StructuredQuerySelection"}},setStructuredQuerySelection:{defaultValue:null,description:"used to set the structuredQuerySelection state",name:"setStructuredQuerySelection",required:!0,type:{name:"Dispatch<SetStateAction<StructuredQuerySelection>>"}}}}}catch{}const Ze=({addRuleRowText:r,groupId:e,structuredQuerySelection:n,setStructuredQuerySelection:t})=>{const o=()=>{const s=pt(n.rows);t({...n,groups:{...n.groups,[`${e}`]:{...n.groups[e],rows:n.groups[e].rows.concat(s)}},rows:{...n.rows,[`${s}`]:{field:"",operator:"",value:""}}})};return E.jsx(Ye,{kind:"ghost",renderIcon:bn,onClick:o,children:r})};try{Ze.displayName="AddRuleRowButton",Ze.__docgenInfo={description:"",displayName:"AddRuleRowButton",props:{addRuleRowText:{defaultValue:null,description:"text to display for the Add rule button",name:"addRuleRowText",required:!0,type:{name:"string"}},groupId:{defaultValue:null,description:"id of the group for the rule row to render",name:"groupId",required:!0,type:{name:"number"}},structuredQuerySelection:{defaultValue:null,description:"state that represents the current rules and selections for the structured query",name:"structuredQuerySelection",required:!0,type:{name:"StructuredQuerySelection"}},setStructuredQuerySelection:{defaultValue:null,description:"used to set the structuredQuerySelection state",name:"setStructuredQuerySelection",required:!0,type:{name:"Dispatch<SetStateAction<StructuredQuerySelection>>"}}}}}catch{}const kn=3,eo=5,ft=({messages:r,groupId:e,structuredQuerySelection:n,setStructuredQuerySelection:t})=>{const o=n.groups[e].rows,s=e===0,i=o.length<kn&&!s,a=[Rt];return s||a.push(Hr),E.jsxs("div",{className:a.join(" "),"data-testid":"rule-group",children:[E.jsx(ut,{messages:r,setStructuredQuerySelection:t,structuredQuerySelection:n,groupId:e}),o.map(l=>{const d=e.toString()+l.toString();return E.jsx(ht,{messages:r,groupId:e,rowId:l,setStructuredQuerySelection:t,structuredQuerySelection:n},d)}),E.jsx("div",{className:wn,children:i&&E.jsx(Ze,{addRuleRowText:r.addRuleRowText,groupId:e,setStructuredQuerySelection:t,structuredQuerySelection:n},e)})]})};try{ft.displayName="RuleGroup",ft.__docgenInfo={description:"",displayName:"RuleGroup",props:{messages:{defaultValue:null,description:"override default messages for the component by specifying custom and/or internationalized text strings",name:"messages",required:!0,type:{name:"Messages"}},groupId:{defaultValue:null,description:"id of the group for the rule row to render",name:"groupId",required:!0,type:{name:"number"}},structuredQuerySelection:{defaultValue:null,description:"state that represents the current rules and selections for the structured query",name:"structuredQuerySelection",required:!0,type:{name:"StructuredQuerySelection"}},setStructuredQuerySelection:{defaultValue:null,description:"used to set the structuredQuerySelection state",name:"setStructuredQuerySelection",required:!0,type:{name:"Dispatch<SetStateAction<StructuredQuerySelection>>"}}}}}catch{}const mt=({addRuleGroupText:r,structuredQuerySelection:e,setStructuredQuerySelection:n})=>{const t=()=>{const o=pt(e.groups),s=pt(e.rows);n({...e,groups:{...e.groups,[`${o}`]:{rows:[s]}},rows:{...e.rows,[`${s}`]:{field:"",operator:"",value:""}},group_order:e.group_order.concat(o)})};return E.jsx(Ye,{kind:"ghost",renderIcon:bn,onClick:t,children:r})};try{mt.displayName="AddRuleGroupButton",mt.__docgenInfo={description:"",displayName:"AddRuleGroupButton",props:{addRuleGroupText:{defaultValue:null,description:"text to display for the Add rule group button",name:"addRuleGroupText",required:!0,type:{name:"string"}},structuredQuerySelection:{defaultValue:null,description:"state that represents the current rules and selections for the structured query",name:"structuredQuerySelection",required:!0,type:{name:"StructuredQuerySelection"}},setStructuredQuerySelection:{defaultValue:null,description:"used to set the structuredQuerySelection state",name:"setStructuredQuerySelection",required:!0,type:{name:"Dispatch<SetStateAction<StructuredQuerySelection>>"}}}}}catch{}const gt={ruleGroupDropdownText:"Satisfy {dropdown} of the following rules",ruleGroupDropdownAllOptionText:"all",ruleGroupDropdownAnyOptionText:"any",ruleGroupDropdownLabelText:"Choose whether to satisfy all or any of the following rules",fieldDropdownPlaceholderText:"Select field",fieldDropdownTitleText:"Field",fieldDropdownLoadingText:"Loading project fields",fieldDropdownErrorText:"Error loading project fields",operatorDropdownIsOptionText:"is",operatorDropdownIsNotOptionText:"is not",operatorDropdownContainsOptionText:"contains",operatorDropdownDoesNotContainOptionText:"does not contain",operatorDropdownPlaceholderText:"Select operator",operatorDropdownTitleText:"Operator",valueInputLabelText:"Value",valueInputPlaceholderText:"Enter value",addRuleRowText:"Add rule",removeRuleRowButtonIconDescription:"Remove rule",addRuleGroupText:"Add group of rules"},to=({messages:r=gt})=>{const e={...gt,...r},[n,t]=w.useState({groups:{0:{rows:[0],operator:","}},rows:{0:{field:"",operator:"",value:""}},group_order:[0]}),o=Xr(n),s=n.groups[0].rows.length<kn,i=Object.keys(n.groups).length-1<eo,{fetchFields:a}=w.useContext(Un);return w.useEffect(()=>{a()},[a]),E.jsxs("div",{className:rt,children:[n.group_order.map(l=>E.jsx(ft,{messages:e,groupId:l,structuredQuerySelection:n,setStructuredQuerySelection:t},l)),E.jsxs("div",{className:wn,children:[s&&E.jsx(Ze,{addRuleRowText:e.addRuleRowText,setStructuredQuerySelection:t,structuredQuerySelection:n,groupId:0}),i&&E.jsx(mt,{addRuleGroupText:e.addRuleGroupText,setStructuredQuerySelection:t,structuredQuerySelection:n})]}),o&&E.jsx(Tt,{className:`${Ur}`,children:o})]})},yn=Fn(to,Hn("StructuredQuery"),Zn);function St(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let ye=St();function vn(r){ye=r}const Tn=/[&<>"']/,no=new RegExp(Tn.source,"g"),Rn=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,ro=new RegExp(Rn.source,"g"),oo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Kt=r=>oo[r];function U(r,e){if(e){if(Tn.test(r))return r.replace(no,Kt)}else if(Rn.test(r))return r.replace(ro,Kt);return r}const io=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function so(r){return r.replace(io,(e,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const ao=/(^|[^\[])\^/g;function v(r,e){let n=typeof r=="string"?r:r.source;e=e||"";const t={replace:(o,s)=>{let i=typeof s=="string"?s:s.source;return i=i.replace(ao,"$1"),n=n.replace(o,i),t},getRegex:()=>new RegExp(n,e)};return t}function Xt(r){try{r=encodeURI(r).replace(/%25/g,"%")}catch{return null}return r}const Ae={exec:()=>null};function Jt(r,e){const n=r.replace(/\|/g,(s,i,a)=>{let l=!1,d=i;for(;--d>=0&&a[d]==="\\";)l=!l;return l?"|":" |"}),t=n.split(/ \|/);let o=0;if(t[0].trim()||t.shift(),t.length>0&&!t[t.length-1].trim()&&t.pop(),e)if(t.length>e)t.splice(e);else for(;t.length<e;)t.push("");for(;o<t.length;o++)t[o]=t[o].trim().replace(/\\\|/g,"|");return t}function Qe(r,e,n){const t=r.length;if(t===0)return"";let o=0;for(;o<t;){const s=r.charAt(t-o-1);if(s===e&&!n)o++;else if(s!==e&&n)o++;else break}return r.slice(0,t-o)}function lo(r,e){if(r.indexOf(e[1])===-1)return-1;let n=0;for(let t=0;t<r.length;t++)if(r[t]==="\\")t++;else if(r[t]===e[0])n++;else if(r[t]===e[1]&&(n--,n<0))return t;return-1}function Yt(r,e,n,t){const o=e.href,s=e.title?U(e.title):null,i=r[1].replace(/\\([\[\]])/g,"$1");if(r[0].charAt(0)!=="!"){t.state.inLink=!0;const a={type:"link",raw:n,href:o,title:s,text:i,tokens:t.inlineTokens(i)};return t.state.inLink=!1,a}return{type:"image",raw:n,href:o,title:s,text:U(i)}}function co(r,e){const n=r.match(/^(\s+)(?:```)/);if(n===null)return e;const t=n[1];return e.split(`
`).map(o=>{const s=o.match(/^\s+/);if(s===null)return o;const[i]=s;return i.length>=t.length?o.slice(t.length):o}).join(`
`)}class Ue{constructor(e){S(this,"options");S(this,"rules");S(this,"lexer");this.options=e||ye}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const t=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Qe(t,`
`)}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const t=n[0],o=co(t,n[3]||"");return{type:"code",raw:t,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:o}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let t=n[2].trim();if(/#$/.test(t)){const o=Qe(t,"#");(this.options.pedantic||!o||/ $/.test(o))&&(t=o.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){const t=Qe(n[0].replace(/^ *>[ \t]?/gm,""),`
`),o=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(t);return this.lexer.state.top=o,{type:"blockquote",raw:n[0],tokens:s,text:t}}}list(e){let n=this.rules.block.list.exec(e);if(n){let t=n[1].trim();const o=t.length>1,s={type:"list",raw:"",ordered:o,start:o?+t.slice(0,-1):"",loose:!1,items:[]};t=o?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=o?t:"[*+-]");const i=new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a="",l="",d=!1;for(;e;){let u=!1;if(!(n=i.exec(e))||this.rules.block.hr.test(e))break;a=n[0],e=e.substring(a.length);let h=n[2].split(`
`,1)[0].replace(/^\t+/,O=>" ".repeat(3*O.length)),p=e.split(`
`,1)[0],m=0;this.options.pedantic?(m=2,l=h.trimStart()):(m=n[2].search(/[^ ]/),m=m>4?1:m,l=h.slice(m),m+=n[1].length);let C=!1;if(!h&&/^ *$/.test(p)&&(a+=p+`
`,e=e.substring(p.length+1),u=!0),!u){const O=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),K=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),P=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),ie=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;e;){const D=e.split(`
`,1)[0];if(p=D,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),P.test(p)||ie.test(p)||O.test(p)||K.test(e))break;if(p.search(/[^ ]/)>=m||!p.trim())l+=`
`+p.slice(m);else{if(C||h.search(/[^ ]/)>=4||P.test(h)||ie.test(h)||K.test(h))break;l+=`
`+p}!C&&!p.trim()&&(C=!0),a+=D+`
`,e=e.substring(D.length+1),h=p.slice(m)}}s.loose||(d?s.loose=!0:/\n *\n *$/.test(a)&&(d=!0));let g=null,T;this.options.gfm&&(g=/^\[[ xX]\] /.exec(l),g&&(T=g[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!g,checked:T,loose:!1,text:l,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=l.trimEnd(),s.raw=s.raw.trimEnd();for(let u=0;u<s.items.length;u++)if(this.lexer.state.top=!1,s.items[u].tokens=this.lexer.blockTokens(s.items[u].text,[]),!s.loose){const h=s.items[u].tokens.filter(m=>m.type==="space"),p=h.length>0&&h.some(m=>/\n.*\n/.test(m.raw));s.loose=p}if(s.loose)for(let u=0;u<s.items.length;u++)s.items[u].loose=!0;return s}}html(e){const n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){const n=this.rules.block.def.exec(e);if(n){const t=n[1].toLowerCase().replace(/\s+/g," "),o=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:t,raw:n[0],href:o,title:s}}}table(e){const n=this.rules.block.table.exec(e);if(!n||!/[:|]/.test(n[2]))return;const t=Jt(n[1]),o=n[2].replace(/^\||\| *$/g,"").split("|"),s=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],i={type:"table",raw:n[0],header:[],align:[],rows:[]};if(t.length===o.length){for(const a of o)/^ *-+: *$/.test(a)?i.align.push("right"):/^ *:-+: *$/.test(a)?i.align.push("center"):/^ *:-+ *$/.test(a)?i.align.push("left"):i.align.push(null);for(const a of t)i.header.push({text:a,tokens:this.lexer.inline(a)});for(const a of s)i.rows.push(Jt(a,i.header.length).map(l=>({text:l,tokens:this.lexer.inline(l)})));return i}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const t=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:t,tokens:this.lexer.inline(t)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:U(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const t=n[2].trim();if(!this.options.pedantic&&/^</.test(t)){if(!/>$/.test(t))return;const i=Qe(t.slice(0,-1),"\\");if((t.length-i.length)%2===0)return}else{const i=lo(n[2],"()");if(i>-1){const l=(n[0].indexOf("!")===0?5:4)+n[1].length+i;n[2]=n[2].substring(0,i),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let o=n[2],s="";if(this.options.pedantic){const i=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);i&&(o=i[1],s=i[3])}else s=n[3]?n[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(this.options.pedantic&&!/>$/.test(t)?o=o.slice(1):o=o.slice(1,-1)),Yt(n,{href:o&&o.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(e,n){let t;if((t=this.rules.inline.reflink.exec(e))||(t=this.rules.inline.nolink.exec(e))){const o=(t[2]||t[1]).replace(/\s+/g," "),s=n[o.toLowerCase()];if(!s){const i=t[0].charAt(0);return{type:"text",raw:i,text:i}}return Yt(t,s,t[0],this.lexer)}}emStrong(e,n,t=""){let o=this.rules.inline.emStrongLDelim.exec(e);if(!o||o[3]&&t.match(/[\p{L}\p{N}]/u))return;if(!(o[1]||o[2]||"")||!t||this.rules.inline.punctuation.exec(t)){const i=[...o[0]].length-1;let a,l,d=i,u=0;const h=o[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,n=n.slice(-1*e.length+i);(o=h.exec(n))!=null;){if(a=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!a)continue;if(l=[...a].length,o[3]||o[4]){d+=l;continue}else if((o[5]||o[6])&&i%3&&!((i+l)%3)){u+=l;continue}if(d-=l,d>0)continue;l=Math.min(l,l+d+u);const p=[...o[0]][0].length,m=e.slice(0,i+o.index+p+l);if(Math.min(i,l)%2){const g=m.slice(1,-1);return{type:"em",raw:m,text:g,tokens:this.lexer.inlineTokens(g)}}const C=m.slice(2,-2);return{type:"strong",raw:m,text:C,tokens:this.lexer.inlineTokens(C)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let t=n[2].replace(/\n/g," ");const o=/[^ ]/.test(t),s=/^ /.test(t)&&/ $/.test(t);return o&&s&&(t=t.substring(1,t.length-1)),t=U(t,!0),{type:"codespan",raw:n[0],text:t}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){const n=this.rules.inline.autolink.exec(e);if(n){let t,o;return n[2]==="@"?(t=U(n[1]),o="mailto:"+t):(t=U(n[1]),o=t),{type:"link",raw:n[0],text:t,href:o,tokens:[{type:"text",raw:t,text:t}]}}}url(e){var t;let n;if(n=this.rules.inline.url.exec(e)){let o,s;if(n[2]==="@")o=U(n[0]),s="mailto:"+o;else{let i;do i=n[0],n[0]=((t=this.rules.inline._backpedal.exec(n[0]))==null?void 0:t[0])??"";while(i!==n[0]);o=U(n[0]),n[1]==="www."?s="http://"+n[0]:s=n[0]}return{type:"link",raw:n[0],text:o,href:s,tokens:[{type:"text",raw:o,text:o}]}}}inlineText(e){const n=this.rules.inline.text.exec(e);if(n){let t;return this.lexer.state.inRawBlock?t=n[0]:t=U(n[0]),{type:"text",raw:n[0],text:t}}}}const uo=/^(?: *(?:\n|$))+/,po=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,ho=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Me=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,fo=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Sn=/(?:[*+-]|\d{1,9}[.)])/,Cn=v(/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Sn).getRegex(),Ct=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,mo=/^[^\n]+/,It=/(?!\s*\])(?:\\.|[^\[\]\\])+/,go=v(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",It).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),bo=v(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Sn).getRegex(),ot="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",_t=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,xo=v("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",_t).replace("tag",ot).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),In=v(Ct).replace("hr",Me).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ot).getRegex(),wo=v(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",In).getRegex(),Et={blockquote:wo,code:po,def:go,fences:ho,heading:fo,hr:Me,html:xo,lheading:Cn,list:bo,newline:uo,paragraph:In,table:Ae,text:mo},en=v("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Me).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ot).getRegex(),ko={...Et,table:en,paragraph:v(Ct).replace("hr",Me).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",en).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ot).getRegex()},yo={...Et,html:v(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",_t).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Ae,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:v(Ct).replace("hr",Me).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Cn).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},_n=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,vo=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,En=/^( {2,}|\\)\n(?!\s*$)/,To=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ve="\\p{P}$+<=>`^|~",Ro=v(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Ve).getRegex(),So=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Co=v(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Ve).getRegex(),Io=v("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Ve).getRegex(),_o=v("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Ve).getRegex(),Eo=v(/\\([punct])/,"gu").replace(/punct/g,Ve).getRegex(),$o=v(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Oo=v(_t).replace("(?:-->|$)","-->").getRegex(),Do=v("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Oo).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ke=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,No=v(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ke).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),$n=v(/^!?\[(label)\]\[(ref)\]/).replace("label",Ke).replace("ref",It).getRegex(),On=v(/^!?\[(ref)\](?:\[\])?/).replace("ref",It).getRegex(),zo=v("reflink|nolink(?!\\()","g").replace("reflink",$n).replace("nolink",On).getRegex(),$t={_backpedal:Ae,anyPunctuation:Eo,autolink:$o,blockSkip:So,br:En,code:vo,del:Ae,emStrongLDelim:Co,emStrongRDelimAst:Io,emStrongRDelimUnd:_o,escape:_n,link:No,nolink:On,punctuation:Ro,reflink:$n,reflinkSearch:zo,tag:Do,text:To,url:Ae},Po={...$t,link:v(/^!?\[(label)\]\((.*?)\)/).replace("label",Ke).getRegex(),reflink:v(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ke).getRegex()},bt={...$t,escape:v(_n).replace("])","~|])").getRegex(),url:v(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Ao={...bt,br:v(En).replace("{2,}","*").getRegex(),text:v(bt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Fe={normal:Et,gfm:ko,pedantic:yo},Pe={normal:$t,gfm:bt,breaks:Ao,pedantic:Po};class re{constructor(e){S(this,"tokens");S(this,"options");S(this,"state");S(this,"tokenizer");S(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||ye,this.options.tokenizer=this.options.tokenizer||new Ue,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:Fe.normal,inline:Pe.normal};this.options.pedantic?(n.block=Fe.pedantic,n.inline=Pe.pedantic):this.options.gfm&&(n.block=Fe.gfm,this.options.breaks?n.inline=Pe.breaks:n.inline=Pe.gfm),this.tokenizer.rules=n}static get rules(){return{block:Fe,inline:Pe}}static lex(e,n){return new re(n).lex(e)}static lexInline(e,n){return new re(n).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const t=this.inlineQueue[n];this.inlineTokens(t.src,t.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,d)=>l+"    ".repeat(d.length));let t,o,s,i;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(t=a.call({lexer:this},e,n))?(e=e.substring(t.raw.length),n.push(t),!0):!1))){if(t=this.tokenizer.space(e)){e=e.substring(t.raw.length),t.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(t);continue}if(t=this.tokenizer.code(e)){e=e.substring(t.raw.length),o=n[n.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+t.raw,o.text+=`
`+t.text,this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(t);continue}if(t=this.tokenizer.fences(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.heading(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.hr(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.blockquote(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.list(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.html(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.def(e)){e=e.substring(t.raw.length),o=n[n.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+t.raw,o.text+=`
`+t.raw,this.inlineQueue[this.inlineQueue.length-1].src=o.text):this.tokens.links[t.tag]||(this.tokens.links[t.tag]={href:t.href,title:t.title});continue}if(t=this.tokenizer.table(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.lheading(e)){e=e.substring(t.raw.length),n.push(t);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let d;this.options.extensions.startBlock.forEach(u=>{d=u.call({lexer:this},l),typeof d=="number"&&d>=0&&(a=Math.min(a,d))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(t=this.tokenizer.paragraph(s))){o=n[n.length-1],i&&o.type==="paragraph"?(o.raw+=`
`+t.raw,o.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(t),i=s.length!==e.length,e=e.substring(t.raw.length);continue}if(t=this.tokenizer.text(e)){e=e.substring(t.raw.length),o=n[n.length-1],o&&o.type==="text"?(o.raw+=`
`+t.raw,o.text+=`
`+t.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(t);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let t,o,s,i=e,a,l,d;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,a.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(d=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(t=u.call({lexer:this},e,n))?(e=e.substring(t.raw.length),n.push(t),!0):!1))){if(t=this.tokenizer.escape(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.tag(e)){e=e.substring(t.raw.length),o=n[n.length-1],o&&t.type==="text"&&o.type==="text"?(o.raw+=t.raw,o.text+=t.text):n.push(t);continue}if(t=this.tokenizer.link(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(t.raw.length),o=n[n.length-1],o&&t.type==="text"&&o.type==="text"?(o.raw+=t.raw,o.text+=t.text):n.push(t);continue}if(t=this.tokenizer.emStrong(e,i,d)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.codespan(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.br(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.del(e)){e=e.substring(t.raw.length),n.push(t);continue}if(t=this.tokenizer.autolink(e)){e=e.substring(t.raw.length),n.push(t);continue}if(!this.state.inLink&&(t=this.tokenizer.url(e))){e=e.substring(t.raw.length),n.push(t);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=e.slice(1);let p;this.options.extensions.startInline.forEach(m=>{p=m.call({lexer:this},h),typeof p=="number"&&p>=0&&(u=Math.min(u,p))}),u<1/0&&u>=0&&(s=e.substring(0,u+1))}if(t=this.tokenizer.inlineText(s)){e=e.substring(t.raw.length),t.raw.slice(-1)!=="_"&&(d=t.raw.slice(-1)),l=!0,o=n[n.length-1],o&&o.type==="text"?(o.raw+=t.raw,o.text+=t.text):n.push(t);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return n}}class Xe{constructor(e){S(this,"options");this.options=e||ye}code(e,n,t){var s;const o=(s=(n||"").match(/^\S*/))==null?void 0:s[0];return e=e.replace(/\n$/,"")+`
`,o?'<pre><code class="language-'+U(o)+'">'+(t?e:U(e,!0))+`</code></pre>
`:"<pre><code>"+(t?e:U(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,n){return e}heading(e,n,t){return`<h${n}>${e}</h${n}>
`}hr(){return`<hr>
`}list(e,n,t){const o=n?"ol":"ul",s=n&&t!==1?' start="'+t+'"':"";return"<"+o+s+`>
`+e+"</"+o+`>
`}listitem(e,n,t){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,n){const t=n.header?"th":"td";return(n.align?`<${t} align="${n.align}">`:`<${t}>`)+e+`</${t}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,n,t){const o=Xt(e);if(o===null)return t;e=o;let s='<a href="'+e+'"';return n&&(s+=' title="'+n+'"'),s+=">"+t+"</a>",s}image(e,n,t){const o=Xt(e);if(o===null)return t;e=o;let s=`<img src="${e}" alt="${t}"`;return n&&(s+=` title="${n}"`),s+=">",s}text(e){return e}}class Ot{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,t){return""+t}image(e,n,t){return""+t}br(){return""}}class oe{constructor(e){S(this,"options");S(this,"renderer");S(this,"textRenderer");this.options=e||ye,this.options.renderer=this.options.renderer||new Xe,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Ot}static parse(e,n){return new oe(n).parse(e)}static parseInline(e,n){return new oe(n).parseInline(e)}parse(e,n=!0){let t="";for(let o=0;o<e.length;o++){const s=e[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const i=s,a=this.options.extensions.renderers[i.type].call({parser:this},i);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(i.type)){t+=a||"";continue}}switch(s.type){case"space":continue;case"hr":{t+=this.renderer.hr();continue}case"heading":{const i=s;t+=this.renderer.heading(this.parseInline(i.tokens),i.depth,so(this.parseInline(i.tokens,this.textRenderer)));continue}case"code":{const i=s;t+=this.renderer.code(i.text,i.lang,!!i.escaped);continue}case"table":{const i=s;let a="",l="";for(let u=0;u<i.header.length;u++)l+=this.renderer.tablecell(this.parseInline(i.header[u].tokens),{header:!0,align:i.align[u]});a+=this.renderer.tablerow(l);let d="";for(let u=0;u<i.rows.length;u++){const h=i.rows[u];l="";for(let p=0;p<h.length;p++)l+=this.renderer.tablecell(this.parseInline(h[p].tokens),{header:!1,align:i.align[p]});d+=this.renderer.tablerow(l)}t+=this.renderer.table(a,d);continue}case"blockquote":{const i=s,a=this.parse(i.tokens);t+=this.renderer.blockquote(a);continue}case"list":{const i=s,a=i.ordered,l=i.start,d=i.loose;let u="";for(let h=0;h<i.items.length;h++){const p=i.items[h],m=p.checked,C=p.task;let g="";if(p.task){const T=this.renderer.checkbox(!!m);d?p.tokens.length>0&&p.tokens[0].type==="paragraph"?(p.tokens[0].text=T+" "+p.tokens[0].text,p.tokens[0].tokens&&p.tokens[0].tokens.length>0&&p.tokens[0].tokens[0].type==="text"&&(p.tokens[0].tokens[0].text=T+" "+p.tokens[0].tokens[0].text)):p.tokens.unshift({type:"text",text:T+" "}):g+=T+" "}g+=this.parse(p.tokens,d),u+=this.renderer.listitem(g,C,!!m)}t+=this.renderer.list(u,a,l);continue}case"html":{const i=s;t+=this.renderer.html(i.text,i.block);continue}case"paragraph":{const i=s;t+=this.renderer.paragraph(this.parseInline(i.tokens));continue}case"text":{let i=s,a=i.tokens?this.parseInline(i.tokens):i.text;for(;o+1<e.length&&e[o+1].type==="text";)i=e[++o],a+=`
`+(i.tokens?this.parseInline(i.tokens):i.text);t+=n?this.renderer.paragraph(a):a;continue}default:{const i='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return t}parseInline(e,n){n=n||this.renderer;let t="";for(let o=0;o<e.length;o++){const s=e[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const i=this.options.extensions.renderers[s.type].call({parser:this},s);if(i!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){t+=i||"";continue}}switch(s.type){case"escape":{const i=s;t+=n.text(i.text);break}case"html":{const i=s;t+=n.html(i.text);break}case"link":{const i=s;t+=n.link(i.href,i.title,this.parseInline(i.tokens,n));break}case"image":{const i=s;t+=n.image(i.href,i.title,i.text);break}case"strong":{const i=s;t+=n.strong(this.parseInline(i.tokens,n));break}case"em":{const i=s;t+=n.em(this.parseInline(i.tokens,n));break}case"codespan":{const i=s;t+=n.codespan(i.text);break}case"br":{t+=n.br();break}case"del":{const i=s;t+=n.del(this.parseInline(i.tokens,n));break}case"text":{const i=s;t+=n.text(i.text);break}default:{const i='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(i),"";throw new Error(i)}}}return t}}class Le{constructor(e){S(this,"options");this.options=e||ye}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}S(Le,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var je,xt,Je,Dn;class Lo{constructor(...e){lt(this,je);lt(this,Je);S(this,"defaults",St());S(this,"options",this.setOptions);S(this,"parse",We(this,je,xt).call(this,re.lex,oe.parse));S(this,"parseInline",We(this,je,xt).call(this,re.lexInline,oe.parseInline));S(this,"Parser",oe);S(this,"Renderer",Xe);S(this,"TextRenderer",Ot);S(this,"Lexer",re);S(this,"Tokenizer",Ue);S(this,"Hooks",Le);this.use(...e)}walkTokens(e,n){var o,s;let t=[];for(const i of e)switch(t=t.concat(n.call(this,i)),i.type){case"table":{const a=i;for(const l of a.header)t=t.concat(this.walkTokens(l.tokens,n));for(const l of a.rows)for(const d of l)t=t.concat(this.walkTokens(d.tokens,n));break}case"list":{const a=i;t=t.concat(this.walkTokens(a.items,n));break}default:{const a=i;(s=(o=this.defaults.extensions)==null?void 0:o.childTokens)!=null&&s[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{t=t.concat(this.walkTokens(a[l],n))}):a.tokens&&(t=t.concat(this.walkTokens(a.tokens,n)))}}return t}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(t=>{const o={...t};if(o.async=this.defaults.async||o.async||!1,t.extensions&&(t.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const i=n.renderers[s.name];i?n.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=i.apply(this,a)),l}:n.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const i=n[s.level];i?i.unshift(s.tokenizer):n[s.level]=[s.tokenizer],s.start&&(s.level==="block"?n.startBlock?n.startBlock.push(s.start):n.startBlock=[s.start]:s.level==="inline"&&(n.startInline?n.startInline.push(s.start):n.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(n.childTokens[s.name]=s.childTokens)}),o.extensions=n),t.renderer){const s=this.defaults.renderer||new Xe(this.defaults);for(const i in t.renderer){if(!(i in s))throw new Error(`renderer '${i}' does not exist`);if(i==="options")continue;const a=i,l=t.renderer[a],d=s[a];s[a]=(...u)=>{let h=l.apply(s,u);return h===!1&&(h=d.apply(s,u)),h||""}}o.renderer=s}if(t.tokenizer){const s=this.defaults.tokenizer||new Ue(this.defaults);for(const i in t.tokenizer){if(!(i in s))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;const a=i,l=t.tokenizer[a],d=s[a];s[a]=(...u)=>{let h=l.apply(s,u);return h===!1&&(h=d.apply(s,u)),h}}o.tokenizer=s}if(t.hooks){const s=this.defaults.hooks||new Le;for(const i in t.hooks){if(!(i in s))throw new Error(`hook '${i}' does not exist`);if(i==="options")continue;const a=i,l=t.hooks[a],d=s[a];Le.passThroughHooks.has(i)?s[a]=u=>{if(this.defaults.async)return Promise.resolve(l.call(s,u)).then(p=>d.call(s,p));const h=l.call(s,u);return d.call(s,h)}:s[a]=(...u)=>{let h=l.apply(s,u);return h===!1&&(h=d.apply(s,u)),h}}o.hooks=s}if(t.walkTokens){const s=this.defaults.walkTokens,i=t.walkTokens;o.walkTokens=function(a){let l=[];return l.push(i.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...o}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return re.lex(e,n??this.defaults)}parser(e,n){return oe.parse(e,n??this.defaults)}}je=new WeakSet,xt=function(e,n){return(t,o)=>{const s={...o},i={...this.defaults,...s};this.defaults.async===!0&&s.async===!1&&(i.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),i.async=!0);const a=We(this,Je,Dn).call(this,!!i.silent,!!i.async);if(typeof t>"u"||t===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(i.hooks&&(i.hooks.options=i),i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(t):t).then(l=>e(l,i)).then(l=>i.hooks?i.hooks.processAllTokens(l):l).then(l=>i.walkTokens?Promise.all(this.walkTokens(l,i.walkTokens)).then(()=>l):l).then(l=>n(l,i)).then(l=>i.hooks?i.hooks.postprocess(l):l).catch(a);try{i.hooks&&(t=i.hooks.preprocess(t));let l=e(t,i);i.hooks&&(l=i.hooks.processAllTokens(l)),i.walkTokens&&this.walkTokens(l,i.walkTokens);let d=n(l,i);return i.hooks&&(d=i.hooks.postprocess(d)),d}catch(l){return a(l)}}},Je=new WeakSet,Dn=function(e,n){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const o="<p>An error occurred:</p><pre>"+U(t.message+"",!0)+"</pre>";return n?Promise.resolve(o):o}if(n)return Promise.reject(t);throw t}};const ke=new Lo;function k(r,e){return ke.parse(r,e)}k.options=k.setOptions=function(r){return ke.setOptions(r),k.defaults=ke.defaults,vn(k.defaults),k};k.getDefaults=St;k.defaults=ye;k.use=function(...r){return ke.use(...r),k.defaults=ke.defaults,vn(k.defaults),k};k.walkTokens=function(r,e){return ke.walkTokens(r,e)};k.parseInline=ke.parseInline;k.Parser=oe;k.parser=oe.parse;k.Renderer=Xe;k.TextRenderer=Ot;k.Lexer=re;k.lexer=re.lex;k.Tokenizer=Ue;k.Hooks=Le;k.parse=k;k.options;k.setOptions;k.use;k.walkTokens;k.parseInline;oe.parse;re.lex;const jo=`#### Overview

The \`StructuredQuery\` component is used to visually build structured queries against your project. In this component, it's possible to select rules that need to be followed. Each rule is composed of a field from your project and whether it is, is not, contains, or does not contain a specific value.

There are top-level rules for which it's possible to choose whether all or any of them must be satisfied. If the query needs to be more granular, it is also possible to add rule groups, which nest additional sets of rules within them. For these rule groups, you can also choose whether all or any of them must be satisfied.

The query that corresponds to the rules and rule groups that are selected is displayed at the bottom of the component. As rules and rule groups are built out in the component, the query will continue to update to match. It's possible to copy the query by clicking the icon next to it.
`,Bo=()=>({messages:on.object("Default messages for the component's text strings",gt)});class qo extends Gn{async listFields(e){return Xn("listFields")(e),Wn({fields:[{field:"field_name_1"},{field:"field_name_2"},{field:"field_name_3"},{field:"field_name_4"},{field:"field_name_5"},{field:"field_name_6"}]})}}const Mo=()=>({searchClient:new qo,projectId:on.text("Project ID","project-id")}),mi={title:"StructuredQuery",parameters:{component:yn}},He={render:()=>E.jsx(Vn,{children:E.jsx(Kn,{...Mo(),children:E.jsx(yn,{...Bo()})})}),name:"default",parameters:{info:{text:k.parse(jo)}}};var tn,nn,rn;He.parameters={...He.parameters,docs:{...(tn=He.parameters)==null?void 0:tn.docs,source:{originalSource:`{
  render: () => {
    return <StoryWrapper>
        <DiscoverySearch {...discoverySearchProps()}>
          <StructuredQuery {...props()} />
        </DiscoverySearch>
      </StoryWrapper>;
  },
  name: 'default',
  parameters: {
    info: {
      text: marked.parse(defaultReadme)
    }
  }
}`,...(rn=(nn=He.parameters)==null?void 0:nn.docs)==null?void 0:rn.source}}};const gi=["Default"];export{He as Default,gi as __namedExportsOrder,mi as default};
