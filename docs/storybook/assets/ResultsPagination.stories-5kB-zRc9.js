import{j as z}from"./jsx-runtime-FsUICBgo.js";import{d as O}from"./index-777x7qAF.js";import{w as ue,F as ge,o as xe,b as he,S as fe,D as be,a as ve}from"./chunk-WFFRPTHA-XxQL4zvM.js";import{D as Te,c as Pe}from"./storybookUtils-P7YVKdto.js";import{R as n,r as h}from"./index-RfLt4OUa.js";import{c as Se}from"./index-tUYgphcS.js";import{f as G}from"./formatMessage-wl7oTduw.js";import{_ as oe,I as le,a as de,b as K,u as X,g as _e,c as E,d as x,e as Y,C as we,h as Re,j as Ne,o as Ce,f as ae,B as te,s as Q}from"./Button-I6r7vMZn.js";import{P as a}from"./index-4QtD-hFu.js";import{W as Ee,a as ye}from"./bucket-34-ZK23PrgJ.js";import"./callBound-4MCeDK1M.js";import"./pickBy-llkn_6s3.js";import"./isPlainObject-g73re4jY.js";import"./index-xck8ovCi.js";import"./preview-errors-Ix78kkVy.js";import"./debounce-eWC8LGMf.js";import"./v4-yQnnJER4.js";var ne,se,ze=["children"],Ie=["children"],ke=n.forwardRef(function(e,s){var i=e.children,d=oe(e,ze);return n.createElement(le,de({width:16,height:16,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",ref:s},d),ne||(ne=n.createElement("path",{d:"M20 24L10 16 20 8z"})),i)}),De=n.forwardRef(function(e,s){var i=e.children,d=oe(e,Ie);return n.createElement(le,de({width:16,height:16,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",ref:s},d),se||(se=n.createElement("path",{d:"M12 8L22 16 12 24z"})),i)}),je=["className","id","inline","labelText","disabled","children","noLabel","iconDescription","hideLabel","invalid","invalidText","helperText","light","size","warn","warnText"],Le=Ce(),U=n.forwardRef(function(e,s){var i,d,f,R=e.className,N=e.id,b=e.inline,y=e.labelText,P=e.disabled,I=e.children,S=e.noLabel;e.iconDescription;var $=e.hideLabel,v=e.invalid,k=e.invalidText,w=e.helperText,m=e.light,j=e.size,T=e.warn,C=e.warnText,o=K(e,je),r=X(),L=_e("enable-v11-release"),F=h.useRef(Le()),u=F.current,l=E((i={},x(i,"".concat(r,"--select"),!0),x(i,"".concat(r,"--select--inline"),b),x(i,"".concat(r,"--select--light"),m),x(i,"".concat(r,"--select--invalid"),v),x(i,"".concat(r,"--select--disabled"),P),x(i,"".concat(r,"--select--warning"),T),i),[L?null:R]),_=E("".concat(r,"--label"),(d={},x(d,"".concat(r,"--visually-hidden"),$),x(d,"".concat(r,"--label--disabled"),P),d)),g=E((f={},x(f,"".concat(r,"--select-input"),!0),x(f,"".concat(r,"--select-input--").concat(j),j),f)),D="".concat(N,"-error-msg"),B=function(){if(v)return k;if(T)return C}(),M=v||T?n.createElement("div",{className:"".concat(r,"--form-requirement"),id:D},B):null,H=E("".concat(r,"--form__helper-text"),x({},"".concat(r,"--form__helper-text--disabled"),P)),W=w?"select-helper-text-".concat(u):void 0,c=w?n.createElement("div",{id:W,className:H},w):null,p={};v?p["aria-describedby"]=D:b||(p["aria-describedby"]=c?W:void 0);var q=function(){return n.createElement(n.Fragment,null,n.createElement("select",Y({},o,p,{id:N,className:g,disabled:P||void 0,"aria-invalid":v||void 0,ref:s}),I),n.createElement(we,{className:"".concat(r,"--select__arrow")}),v&&n.createElement(Ee,{className:"".concat(r,"--select__invalid-icon")}),!v&&T&&n.createElement(ye,{className:"".concat(r,"--select__invalid-icon ").concat(r,"--select__invalid-icon--warning")}))}();return n.createElement("div",{className:L?E("".concat(r,"--form-item"),R):"".concat(r,"--form-item")},n.createElement("div",{className:l},!S&&n.createElement("label",{htmlFor:N,className:_},y),b&&n.createElement("div",{className:"".concat(r,"--select-input--inline__wrapper")},n.createElement("div",{className:"".concat(r,"--select-input__wrapper"),"data-invalid":v||null},q),M),!b&&n.createElement("div",{className:"".concat(r,"--select-input__wrapper"),"data-invalid":v||null},q),!b&&M?M:c))});U.displayName="Select";U.propTypes={children:a.node,className:a.string,defaultValue:a.any,disabled:a.bool,helperText:a.node,hideLabel:a.bool,iconDescription:Re(a.string),id:a.string.isRequired,inline:a.bool,invalid:a.bool,invalidText:a.node,labelText:a.node,light:a.bool,noLabel:a.bool,onChange:a.func,size:Ne("enable-v11-release")?a.oneOf(["sm","md","lg"]):a.oneOf(["sm","md","lg","xl"]),warn:a.bool,warnText:a.node};U.defaultProps={disabled:!1,labelText:"Select",inline:!1,invalid:!1,invalidText:"",helperText:"",light:!1};const Fe=U;var Oe=["className","value","disabled","hidden","text"],Z=function(e){var s,i=e.className,d=e.value,f=e.disabled,R=e.hidden,N=e.text,b=K(e,Oe),y=X(),P=E((s={},x(s,"".concat(y,"--select-option"),!0),x(s,i,i),s));return n.createElement("option",Y({},b,{className:P,value:d,disabled:f,hidden:R}),N)};Z.propTypes={className:a.string,disabled:a.bool,hidden:a.bool,text:a.string.isRequired,value:a.any.isRequired};Z.defaultProps={disabled:!1,hidden:!1,value:"",text:""};const $e=Z;var Me=["backwardText","children","className","disabled","forwardText","id","initialPage","itemsPerPageText","itemRangeText","itemText","onChange","pageRangeText","pageSize","pageSizes","pageText","pagesUnknown","totalItems"];function ee(t){var e=t.backwardText,s=t.children,i=t.className,d=t.disabled,f=t.forwardText,R=t.id,N=t.initialPage,b=t.itemsPerPageText,y=t.itemRangeText,P=t.itemText,I=t.onChange,S=t.pageRangeText,$=t.pageSize,v=t.pageSizes,k=t.pageText,w=t.pagesUnknown,m=t.totalItems,j=K(t,Me),T=h.useState(N),C=ae(T,2),o=C[0],r=C[1],L=h.useState($),F=ae(L,2),u=F[0],l=F[1],_=X(),g=m?Math.max(Math.ceil(m/u),1):void 0,D=d||o===1,B=d||o===g;function M(p){r(Number(p))}function H(){var p=o+1;r(p),I({page:p,pageSize:u})}function W(){var p=o-1;r(p),I({page:p,pageSize:u})}var c="".concat(_,"--unstable-pagination");return n.createElement("section",Y({className:E(c,i)},j),n.createElement("div",{className:"".concat(c,"__left")},v&&n.createElement(n.Fragment,null,n.createElement("label",{id:"".concat(c,"__page-sizer__counter-").concat(R),className:"".concat(c,"__text"),htmlFor:"".concat(c,"__page-sizer__input-").concat(R)},b),n.createElement(Fe,{id:"".concat(c,"__page-sizer__input-").concat(R),className:"".concat(c,"__page-sizer"),labelText:"",hideLabel:!0,noLabel:!0,inline:!0,onChange:function(q){return l(Number(q.target.value))},value:u},v.map(function(p){return n.createElement($e,{key:p,value:p,text:String(p)})}))),n.createElement("span",{className:"".concat(c,"__text")},m&&!w&&y(Math.min(u*(o-1)+1,m),Math.min(o*u,m),m),m&&w&&P(u*(o-1)+1,o*u),!m&&P(u*(o-1)+1,o*u))),n.createElement("div",{className:"".concat(c,"__right")},s&&m&&s({currentPage:o,currentPageSize:u,onSetPage:M,totalPages:g}),s&&m&&!w&&n.createElement("span",{className:"".concat(c,"__text")},S("",g)),s&&!m&&n.createElement("span",{className:"".concat(c,"__text")},k(o)),!s&&n.createElement("span",{className:"".concat(c,"__text")},m?S(o,g):k(o)),n.createElement(te,{className:E("".concat(c,"__button"),"".concat(c,"__button--backward"),x({},"".concat(c,"__button--no-index"),D)),onClick:function(){return W()},disabled:D,hasIconOnly:!0,renderIcon:ke,tooltipAlignment:"center",tooltipPosition:"top",iconDescription:e}),n.createElement(te,{className:E("".concat(c,"__button"),"".concat(c,"__button--forward"),x({},"".concat(c,"__button--no-index"),B)),onClick:function(){return H()},disabled:B,hasIconOnly:!0,renderIcon:De,tooltipAlignment:"center",tooltipPosition:"top",iconDescription:f})))}ee.propTypes={backwardText:a.string,children:a.oneOfType([a.node,a.func]),className:a.string,disabled:a.bool,forwardText:a.string,id:a.oneOfType([a.string,a.number]),initialPage:a.number,itemRangeText:a.func,itemText:a.func,itemsPerPageText:a.string,onChange:a.func,pageRangeText:a.func,pageSize:a.number,pageSizes:a.arrayOf(a.number),pageText:a.func,pagesUnknown:a.bool,totalItems:a.number};ee.defaultProps={backwardText:"Previous page",className:null,children:void 0,disabled:!1,forwardText:"Next page",id:1,itemsPerPageText:"Items per page:",itemRangeText:function(e,s,i){return"".concat(e,"–").concat(s," of ").concat(i," items")},itemText:function(e,s){return"".concat(e,"–").concat(s," items")},initialPage:1,pageRangeText:function(e,s){return"".concat(e," of ").concat(s," pages")},pageSize:10,pageSizes:void 0,pageText:function(e){return"page ".concat(e)},pagesUnknown:!1,totalItems:void 0};const me={matching_results:20967,retrieval_details:{},results:[]},V={itemRangeText:"{min}–{max} of {total} results",itemsPerPageText:"Items per page:",pageRangeText:"of {total} pages",pageText:"Page {page}"},J=({page:t=1,pageSizes:e=[10,20,30,40,50],pageSize:s,showPageSizeSelector:i=!0,messages:d=V,onChange:f,apiRef:R,...N})=>{const b={...V,...d},{performSearch:y,setSearchParameters:P}=h.useContext(he),{searchResponseStore:{data:I,parameters:S},componentSettings:$,isResultsPaginationComponentHidden:v}=h.useContext(fe),[k,w]=h.useState(t),[m,j]=h.useState(0),T=s||S.count||10,C=h.useCallback(l=>{f&&f(l);const{page:_,pageSize:g}=l,D=(_-1)*g;w(_),y({...S,count:g,offset:D},!1)},[f,y,S]),o=h.useCallback(({triggerOnChange:l})=>{w(1),j(m+1),l&&C({page:1,pageSize:T})},[C,m,T]);h.useImperativeHandle(R,()=>({reset:o})),h.useEffect(()=>{(s||T)&&P(l=>({...l,count:s||T}))},[P,s,T]),h.useEffect(()=>{const l=S.count||10,_=S.offset||0,g=Math.floor(_/l)+1;k!==g&&(w(g),g===1&&o({}))},[k,S.count,S.offset,o]);const r=I&&I.matching_results||void 0,L=(l,_,g)=>G(b.itemRangeText,{min:l,max:_,total:g},!1),F=(l,_)=>G(b.pageRangeText,{total:_},!1),u=l=>G(b.pageText,{page:l},!1);return $?z.jsx(z.Fragment,{children:!v&&z.jsx(ee,{className:Se(`${Q.prefix}--pagination`,{[`${Q.prefix}--pagination__page-size-selector--hidden`]:!i}),totalItems:r,pageSize:T,pageSizes:e,onChange:C,itemRangeText:L,itemsPerPageText:b.itemsPerPageText,pageRangeText:F,pageText:u,...N,children:l=>z.jsx(Be,{...l,onChange:C})},m)}):null};function Be({currentPage:t,currentPageSize:e,onSetPage:s,onChange:i}){const[d,f]=h.useState(e);return h.useEffect(()=>{e!==d&&(f(e),i({page:1,pageSize:e}),s(1))},[e,i,s,d]),z.jsx("span",{className:`${Q.prefix}--unstable-pagination__text`,"data-testid":"current-page",children:t})}const We=ue(J,ge("ResultsPagination"),xe),pe=h.forwardRef((t,e)=>z.jsx(We,{...t,apiRef:e}));try{J.displayName="ResultsPagination",J.__docgenInfo={description:"",displayName:"ResultsPagination",props:{}}}catch{}const qe=()=>({page:O.number("The current page (page)",1),pageSize:O.number("Number of items per page (pageSize)",10),pageSizes:O.array("Page size choices (pageSizes)",["10","20","30","40","50"]).map(t=>parseInt(t,10)),showPageSizeSelector:O.boolean("Show selector for dynamically changing `pageSize` (showPageSizeSelector)",!0),messages:O.object("Default messages for the component's text strings",V)});class Ae extends Te{query(e){return ve("query")(e),Pe(me)}}const Ue=()=>({searchClient:new Ae,projectId:O.text("Project ID","project-id"),overrideSearchResults:me}),oa={title:"ResultsPagination",parameters:{component:pe},excludeStories:["props"]},A={render:()=>z.jsx(be,{...Ue(),children:z.jsx(pe,{...qe()})}),name:"default"};var re,ie,ce;A.parameters={...A.parameters,docs:{...(re=A.parameters)==null?void 0:re.docs,source:{originalSource:`{
  render: () => {
    return <DiscoverySearch {...discoverySearchProps()}>
        <ResultsPagination {...props()} />
      </DiscoverySearch>;
  },
  name: 'default'
}`,...(ce=(ie=A.parameters)==null?void 0:ie.docs)==null?void 0:ce.source}}};const la=["props","Default"];export{A as Default,la as __namedExportsOrder,oa as default,qe as props};
